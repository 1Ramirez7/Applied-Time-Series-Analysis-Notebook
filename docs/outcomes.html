<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Applied Time Series Analysis Outcomes – Applied Time Series Notebook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Images/favicon.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-e3e2ec5412a9eb5ab38593fc64bd21dd.min.css" rel="stylesheet" append-hash="true" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark-6dc023459391c1bd9e644fbe7ca3ad24.min.css" rel="prefetch" append-hash="true" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Applied Time Series Notebook</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Master</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-projects">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./projects.html">
 <span class="dropdown-text">Applied Time Series Projects</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Project 1</li>
        <li>
    <a class="dropdown-item" href="./projects/project1.html">
 <span class="dropdown-text">Time Series: China Export Commodities</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Project 2</li>
        <li>
    <a class="dropdown-item" href="./projects/project2.html">
 <span class="dropdown-text">Time Series Project 2: Consumer Credit</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Project 3</li>
        <li>
    <a class="dropdown-item" href="./projects/project3.html">
 <span class="dropdown-text">Project title here</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ch-1" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ch 1</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ch-1">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_1.html">
 <span class="dropdown-text">Chapter overview and Task</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_1_1.html">
 <span class="dropdown-text">Time Series Homework: Chapter 1 Lesson 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_1_2.html">
 <span class="dropdown-text">Time Series Homework: Chapter 1 Lesson 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_1_3.html">
 <span class="dropdown-text">Time Series Homework: Chapter 1 Lesson 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_1_4.html">
 <span class="dropdown-text">Time Series Homework: Chapter 1 Lesson 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_1_5.html">
 <span class="dropdown-text">Time Series Homework: Chapter 1 Lesson 5</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ch-2" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ch 2</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ch-2">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_2.html">
 <span class="dropdown-text">Autocorrelation Concepts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_2_1.html">
 <span class="dropdown-text">Time Series Homework: Chapter 2 Lesson 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_2_2.html">
 <span class="dropdown-text">Time Series Homework: Chapter 2 Lesson 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_2_3.html">
 <span class="dropdown-text">Time Series Homework: Chapter 2 Lesson 3</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ch-3" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ch 3</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ch-3">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_3.html">
 <span class="dropdown-text">Chapter overview and Task</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_3_2.html">
 <span class="dropdown-text">Time Series Homework: Chapter 3 Lesson 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_3_3.html">
 <span class="dropdown-text">Time Series Homework: Chapter 3 Lesson 3</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_3_4.html">
 <span class="dropdown-text">Time Series Homework: Chapter 3 Lesson 4</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_3_5.html">
 <span class="dropdown-text">Time Series Homework: Chapter 3 Lesson 5</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">r code Models draft</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_3_overview_code_draft.html">
 <span class="dropdown-text">Chapter 3 r code examples and practice</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 1</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_3_lesson_1.html">
 <span class="dropdown-text">White Noise and Random Walks - Part 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_3_1.html">
 <span class="dropdown-text">Time Series Homework: Chapter 3 Lesson 1</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ch-4" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ch 4</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ch-4">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4.html">
 <span class="dropdown-text">Chapter overview and Task</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">r code Models draft</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_overview_code_draft.html">
 <span class="dropdown-text">Chapter 4 r code examples and practice</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 1</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_1.html">
 <span class="dropdown-text">White Noise and Random Walks - Part 1</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_1_code_notes.html">
 <span class="dropdown-text">Ch 4.1 Code Notes</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 2</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_2.html">
 <span class="dropdown-text">White Noise and Random Walks - Part 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_4_2.html">
 <span class="dropdown-text">Time Series Homework: Chapter 4 Lesson 2</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 3</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_3.html">
 <span class="dropdown-text">Autoregressive (AR) Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./hw/homework_4_3.html">
 <span class="dropdown-text">Time Series Homework: Chapter 4 Lesson 3</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 4</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_4.html">
 <span class="dropdown-text">Fitted AR Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./chapters/chapter_4_lesson_4_code_notes.html">
 <span class="dropdown-text">Ch 4.4 Code Notes</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ch-5" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Ch 5</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-ch-5">    
        <li class="dropdown-header">Overview</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_5.html">
 <span class="dropdown-text">Chapter overview and Task</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 1</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_5_lesson_1.html">
 <span class="dropdown-text">White Noise and Random Walks - Part 1</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Lesson 1 Notes</li>
        <li>
    <a class="dropdown-item" href="./chapters/chapter_5_lesson_1_code_notes.html">
 <span class="dropdown-text">Linear Models, GLS, and Seasonal Indicator Variables</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tools" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Tools</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-tools">    
        <li class="dropdown-header">Tools, Help &amp; Ideas</li>
        <li>
    <a class="dropdown-item" href="./tools_help_ideas.html">
 <span class="dropdown-text">Tools, Resources and Help Ideas</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tools/markdown_visuals.html">
 <span class="dropdown-text">Markdown Visuals</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tools/git_yml_term.html">
 <span class="dropdown-text">Git and Terminal Commands</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Date &amp; Index formatting</li>
        <li>
    <a class="dropdown-item" href="./tools/stepsforDate_index_formatting.html">
 <span class="dropdown-text">Steps for formatting Date and Creating Index</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Math Formulas</li>
        <li>
    <a class="dropdown-item" href="./tools/math_formulas.html">
 <span class="dropdown-text">Formulas</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link active" href="./outcomes.html" aria-current="page"> 
<span class="menu-text">Outcomes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./definitions.html"> 
<span class="menu-text">def</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#index" id="toc-index" class="nav-link active" data-scroll-target="#index">index</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Applied Time Series Analysis Outcomes</h1>
<p class="subtitle lead">MATH 494R</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- add eval: false when working on this so it renders faster -->
<details>
<summary>
<strong>1.2: Use technical language to describe the main features of time series data</strong>
</summary>
<ul>
<li><strong>Define time series analysis</strong>
<ul>
<li>A time series analysis quantifies the main features in data and the random variation. These reasons, combined with improved computing power, have made time series methods widely applicable in government, industry, and commerce.</li>
</ul></li>
<li><strong>Define time series</strong>
<ul>
<li>Time series are analysed to understand the past and to predict the future, enabling managers or policy makers to make properly informed decisions.</li>
</ul></li>
<li><strong>Define sampling interval</strong>
<ul>
<li>When a variable is measured sequentially in time over or at a fixed interval, known as the sampling interval, the resulting data form a time series.</li>
</ul></li>
<li><strong>Define serial dependence or autocorrelation</strong>
<ul>
<li>A correlation of a variable with itself at different times is known as autocorrelation or serial correlation.</li>
</ul></li>
<li><strong>Define a time series trend</strong>
<ul>
<li>In general, a systematic change in a time series that does not appear to be periodic is known as a trend. The simplest model for a trend is a linear increase or decrease, and this is often an adequate approximation.</li>
</ul></li>
<li><strong>Define seasonal variation</strong>
<ul>
<li>Repeated pattern within each year (or any other fixed time period).</li>
</ul></li>
<li><strong>Define cycle</strong>
<ul>
<li>Repeated pattern that does not correspond to some fixed natural period.</li>
</ul></li>
<li><strong>Differentiate between deterministic and stochastic trends</strong>
<ul>
<li>Stochastic Trend: Random trend that does not follow a discernible or predictable pattern. <a href="#fig-stochastic" class="quarto-xref">Figure&nbsp;1</a></li>
<li>Deterministic Trend: Can be modeled with mathematical functions, facilitating the long-term prediction of the behavior. <a href="#fig-deterministic" class="quarto-xref">Figure&nbsp;2</a></li>
</ul></li>
</ul>
</details>
<details>
<summary>
1.2: <strong>Plot time series data to visualize trends, seasonal patterns, and potential outliers</strong>
</summary>
<ul>
<li>Plot a “ts” object</li>
<li>Plot the estimated trend of a time series by computing the mean across one full period</li>
</ul>
</details>
<details>
<summary>
1.3: <strong>Decompose time series into trends, seasonal variation, and residuals</strong>
</summary>
<ul>
<li><strong>Define smoothing</strong>
<ul>
<li>The centred moving average is an example of a smoothing procedure that is applied retrospectively to a time series with the objective of identifying an underlying signal or trend.</li>
</ul></li>
<li><strong>Compute the centered moving average for a time series</strong>
<ul>
<li><span class="math inline">\(\hat m_t = \dfrac{\frac{1}{2}x_{t-6} + x_{t-5} + \cdots + x_{t-1} + x_t + x_{t+1} + \cdot + x_{t+5} + \frac{1}{2} x_{t+6}}{12}\)</span>.</li>
</ul></li>
<li><strong>Estimate the trend component using moving averages</strong>
<ul>
<li>There are various ways to estimate the trend <span class="math inline">\(m_t\)</span> at time t, but a relatively simple procedure, is just use the cma formula for <span class="math inline">\(x_t\)</span>. Orange line = CMA. <a href="#fig-cma" class="quarto-xref">Figure&nbsp;3</a></li>
</ul></li>
</ul>
</details>
<details>
<summary>
1.3 <strong>Plot time series data to visualize trends, seasonal patterns, and potential outliers</strong>
</summary>
<ul>
<li><strong>Plot the estimated trend of a time series using a moving average.</strong></li>
<li><strong>Make box plots to examine seasonality.</strong></li>
<li><strong>Interpret the trend and seasonal pattern observed in a time series</strong>
<ul>
<li>Trend is increasing over time, and there is a seasonal pattern that repeats every 12 months. The trend is estimated using a centred moving average, and the seasonal pattern is visualized using box plots. <a href="#fig-cma" class="quarto-xref">Figure&nbsp;3</a> <a href="#fig-cmaboxplot" class="quarto-xref">Figure&nbsp;4</a></li>
</ul></li>
</ul>
</details>
<details>
<summary>
1.4: <strong>Use R to describe key features of time series data</strong>
</summary>
<ul>
<li>Import CSV data and convert to tsibble format</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Weather data for Rexburg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>monthly_tsibble <span class="ot">&lt;-</span> rio<span class="sc">::</span><span class="fu">import</span>(<span class="st">"https://byuistats.github.io/timeseries/data/rexburg_weather.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert 'dates' to Date format</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date2 =</span> <span class="fu">ymd</span>(dates)) <span class="sc">|&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract year and month from 'date2'</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_month =</span> <span class="fu">yearmonth</span>(date2)) <span class="sc">|&gt;</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Group data by 'year_month'</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year_month) <span class="sc">|&gt;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Calculate mean of 'rexburg_airport_high' for each group</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">average_daily_high_temp =</span> <span class="fu">mean</span>(rexburg_airport_high)) <span class="sc">|&gt;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove grouping</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Convert data frame to time series tibble</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tsibble</span>(<span class="at">index =</span> year_month)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a> <span class="co"># Display the resulting tibble</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">view</span>(monthly_tsibble) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</details>
<details>
<summary>
1.4: <strong>Decompose time series into trends, seasonal variation, and residuals</strong>
</summary>
<ul>
<li><strong>Implement additive decomposition</strong>
<ul>
<li>A simple additive decomposition model is given by <span class="math inline">\(x_t = m_t + s_t + r_t\)</span>, where <span class="math inline">\(m_t\)</span> is the trend, <span class="math inline">\(s_t\)</span> is the seasonal component, and <span class="math inline">\(r_t\)</span> (or in the book: where <span class="math inline">\(z_t\)</span> is an error term) is the random component. (1.5.2)</li>
</ul></li>
<li><strong>Explain how to remove seasonal variation using an estimate for seasonal component of a time series</strong>
<ul>
<li>To remove the seasonal variation from a time series, we can subtract the estimated seasonal component from the original time series. This results in a seasonally-adjusted time series that can be used for further analysis.</li>
<li>It is common to present economic indicators, such as unemployment percentages, as seasonally adjusted series.This highlights any trend that might otherwise be masked by seasonal variation attributable, for instance, to the end of the academic year, when school and university leavers are seeking work. (1.5.3)</li>
</ul></li>
<li><strong>Compute the estimators of seasonal variation for an additive model</strong>
<ul>
<li><p><span class="math inline">\(\hat s_t\)</span>: The centered moving average, <span class="math inline">\(\hat m_t\)</span>, is then used to compute the monthly additive effect, <span class="math inline">\(\hat s_t\)</span>.</p></li>
<li><p><span class="math inline">\(\bar {\hat s_t}\)</span>: calculate the mean of the <span class="math inline">\(\hat s_t\)</span> values for each month. We will call this <span class="math inline">\(\bar {\hat s_t}\)</span>,</p></li>
<li><p><span class="math inline">\(\bar{\bar {\hat s_t}}\)</span>: the unadjusted monthly additive components.</p>
<p><span class="math display">\[
  \bar s_t = \bar {\hat s_t} - \bar{\bar {\hat s_t}}
\]</span></p></li>
</ul></li>
</ul>
<p>where <span class="math inline">\(\bar {\hat s_t}\)</span> is the mean of the <span class="math inline">\(\hat s_t\)</span> values corresponding to month <span class="math inline">\(t\)</span>, and <span class="math inline">\(\bar{\bar {\hat s_t}}\)</span> is the mean of the <span class="math inline">\(\bar {\hat s_t}\)</span> values.</p>
<ul>
<li><p><span class="math inline">\(\bar s_t\)</span>: This yields <span class="math inline">\(\bar s_t\)</span>, the seasonally adjusted mean for each month.</p></li>
<li><p><strong>Calculate the random component for an additive model</strong></p>
<ul>
<li><p>We calculate the random component by subtracting the trend and seasonally adjusted mean from the time series:</p>
<p><span class="math display">\[
  \text{random component} = x_t - \hat m_t - \bar s_t
\]</span></p></li>
</ul></li>
<li><p><strong>Compute a seasonally-adjusted time series based on an additive model</strong></p>
<ul>
<li><p>The seasonally adjusted series is computed by subtracting <span class="math inline">\(\bar s_t\)</span> from each of the observed values:</p>
<p><span class="math display">\[
  \text{seasonally adjusted series} = x_t - \bar s_t
\]</span>. The figure below illustrates the original time series (in black), the centered moving average <span class="math inline">\(\hat m_t\)</span> (in blue), and the seasonally adjusted series (in red). <a href="#fig-seasonallyadjustedts" class="quarto-xref">Figure&nbsp;5</a></p></li>
</ul></li>
</ul>
</details>
<details>
<summary>
1.5: <strong>Decompose time series into trends, seasonal variation, and residuals</strong>
</summary>
<ul>
<li><strong>Explain the differences between additive and multiplicative models</strong>
<ul>
<li>in Models where they are dominated by a trend and or seasonal effect, then classical additive/multiplicative models are more common.</li>
<li><strong>Multiplicative</strong> Model : R’s multiplicative model: this implies that the error term, <span class="math inline">\(z_t\)</span> (or <span class="math inline">\(r_t\)</span>), has a mean of 1, rather than 0.</li>
<li><strong>Additve</strong> model <span class="math inline">\(x_t = m_t + s_t + z_t\)</span> vs <strong>multiplicative</strong> book <span class="math inline">\(x_t = m_t * s_t + z_t\)</span> or <strong>multiplicative r</strong> define as <span class="math inline">\(x_t = m_t * s_t * z_t\)</span></li>
<li><span style="color:purple;"><strong>Seasonal Component</strong></span>
<ul>
<li><p><strong>Additive</strong>:<span class="math inline">\(s_t = \sin \left( \frac{t\pi}{6} \right) + \frac{1}{2}\cos\left(\frac{t \pi}{18} \right)\)</span></p>
<p>The r seasonal formula in the code corresponds to: <span class="math display">\[s_t = b \sin \left( \frac{t}{12} \cdot 2 \pi \right) + c \cos \left( \frac{t}{12} \cdot 2 \pi \cdot 3 \right)\]</span></p>
<p><em>Components:</em></p>
<ol type="1">
<li>Sinusoidal Component:<br>
<span class="math display">\[b \sin \left( \frac{t}{12} \cdot 2 \pi \right)\]</span>
<ul>
<li><span class="math inline">\(b = 1\)</span>: The amplitude of the sine wave.</li>
<li><span class="math inline">\(\frac{t}{12} \cdot 2 \pi\)</span>: Converts <span class="math inline">\(t\)</span>, the month number, into a cycle based on a 12-month period.</li>
</ul></li>
<li>Cosine Component: <span class="math display">\[c \cos \left( \frac{t}{12} \cdot 2 \pi \cdot 3 \right)\]</span>
<ul>
<li><span class="math inline">\(c = 0.5\)</span>: The amplitude of the cosine wave.</li>
<li><span class="math inline">\(\frac{t}{12} \cdot 2 \pi \cdot 3\)</span>: Introduces a higher frequency cycle over the same 12-month period.</li>
</ul></li>
</ol></li>
<li><p><strong>Additive Seasonal Component</strong>: <span class="math inline">\(s_t\)</span> <span class="math display">\[\text{seasonally adjusted series}  s_t = x_t - \bar s_t\]</span></p>
<ul>
<li><p>Seasonally Adjusted Means <span class="math inline">\(\bar s_t\)</span> <span class="math display">\[
\bar s_t = \bar {\hat s_t} - \bar{\bar {\hat s_t}}
\]</span> where <span class="math inline">\(\bar {\hat s_t}\)</span> is the mean of the <span class="math inline">\(\hat s_t\)</span> values corresponding to month <span class="math inline">\(t\)</span>, and <span class="math inline">\(\bar{\bar {\hat s_t}}\)</span> is the mean of the <span class="math inline">\(\bar {\hat s_t}\)</span> values.</p></li>
<li><p>Montly Additive Effect <span class="math inline">\(\hat s_t\)</span> <span class="math display">\[
\hat s_t = x_t - \hat m_t
\]</span> The centered moving average, <span class="math inline">\(\hat m_t\)</span>, is then used to compute the monthly additive effect, <span class="math inline">\(\hat s_t\)</span></p></li>
</ul></li>
<li><p>spacer</p></li>
<li><p><strong>Multiplicative Seasonal Component</strong> <span class="math inline">\(s_t\)</span></p>
<ul>
<li><p>Seasonally Adjusted Means <span class="math inline">\(\bar s_t\)</span> <span class="math display">\[ \bar s_t = \frac{ \left( \bar {\hat s_t} \right) }{ \left( \bar {\bar {\hat s_t}} \right) } \]</span> Divide each of the <span class="math inline">\(\bar {\hat s_t}\)</span> values by <span class="math inline">\(\bar {\bar {\hat s_t}}\)</span> to get <span class="math inline">\(\bar s_t\)</span>, the seasonally adjusted factor for quarter <span class="math inline">\(t\)</span>. (Note that the mean of the <span class="math inline">\(\bar s_t\)</span> values will be 1.) <span class="math inline">\(\bar {\hat s_t}\)</span> = mean(<span class="math inline">\(\hat s_t\)</span>) (unique like mean of Jan or mean of 1st Q) <span class="math inline">\(\bar {\bar {\hat s_t}}\)</span> = mean(<span class="math inline">\(\bar {\hat s_t}\)</span>) - overallmean mean of <span class="math inline">\(\bar {\hat s_t}\)</span></p></li>
<li><p>Monthly/quaterly Adjusted Means <span class="math inline">\(\hat s_t\)</span>: <span class="math display">\[
\hat s_t = \dfrac{ x_t }{ \hat m_t }
\]</span> The centered moving average, <span class="math inline">\(\hat m_t\)</span>, is then used to compute the quarterly multiplictive effect, <span class="math inline">\(\hat s_t\)</span>:</p></li>
<li><p>Centered MA is calculated the same way as additive for this step.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1.5 lesson code sample</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># computes the 4-quarter centered moving average (m_hat)</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>apple_ts <span class="sc">$</span>% apple_ts <span class="sc">|&gt;</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">m_hat =</span> (</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>          (<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> <span class="fu">lag</span>(revenue, <span class="dv">2</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>          <span class="sc">+</span> <span class="fu">lag</span>(revenue, <span class="dv">1</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>          <span class="sc">+</span> revenue</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>          <span class="sc">+</span> <span class="fu">lead</span>(revenue, <span class="dv">1</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>          <span class="sc">+</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">2</span>) <span class="sc">*</span> <span class="fu">lead</span>(revenue, <span class="dv">2</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">/</span> <span class="dv">4</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div></li>
</ul></li>
<li><p>spacer</p></li>
<li><p>spacer</p></li>
<li><p><strong>Multiplicative</strong> The seasonal formula in the multiplicative model corresponds to: <span class="math display">\[s_t = e^{b \sin \left( \frac{t}{12} \cdot 2 \pi \right) + c \cos \left( \frac{t}{12} \cdot 2 \pi \cdot 3 \right) + 1}\]</span></p>
<p>Components:</p>
<ol type="1">
<li><strong>Exponential Seasonal Component</strong>:<br>
<span class="math display">\[
e^{b \sin \left( \frac{t}{12} \cdot 2 \pi \right) + c \cos \left( \frac{t}{12} \cdot 2 \pi \cdot 3 \right) + 1}
\]</span>
<ul>
<li><span class="math inline">\(b = 1\)</span>: The amplitude of the sine wave.<br>
</li>
<li><span class="math inline">\(c = 0.5\)</span>: The amplitude of the cosine wave.<br>
</li>
<li><span class="math inline">\(\frac{t}{12} \cdot 2 \pi\)</span>: Converts <span class="math inline">\(t\)</span>, the month number, into a 12-month sinusoidal cycle.</li>
<li><span class="math inline">\(\frac{t}{12} \cdot 2 \pi \cdot 3\)</span>: Introduces a higher frequency cycle over the same 12-month period.<br>
</li>
<li><span class="math inline">\(+1\)</span>: Ensures the seasonal component is strictly positive.</li>
</ul></li>
<li><strong>Multiplicative Combination</strong>:
<ul>
<li>The seasonal component <span class="math inline">\(s_t\)</span> is multiplied with the trend <span class="math inline">\(m_t\)</span> and error term <span class="math inline">\(z_t\)</span> to construct the time series: <span class="math display">\[
x_t = m_t \cdot s_t \cdot z_t
\]</span></li>
</ul></li>
</ol></li>
</ul></li>
<li><span style="color:purple;"><strong>Random Component</strong></span> <span class="math inline">\(r_t\)</span> or <span class="math inline">\(z_t\)</span>
<ul>
<li><p>additive: <span class="math inline">\(r_t = x_t - \hat m_t - \bar s_t\)</span> spacer <span class="math display">\[r_t = x_t - \hat m_t - \bar s_t\]</span></p></li>
<li><p>multiplicative:</p></li>
</ul></li>
</ul></li>
</ul>
<p>$$ ignore this money signs (see source comment) <!-- this money signs are needed to cancel out two previously use so the red txt can go away. gotta fixed this later but cant spend to much time on it now --></p>
<p><span class="math display">\[z_t = \dfrac{ x_t }{ \hat m_t \cdot \bar s_t }\]</span></p>
<ul>
<li><strong>Implement multiplicative decomposition</strong> This can be found in code for chapter 1, and by reviewing the lesson 1.5 code.</li>
<li><strong>Compute the estimators of seasonal variation for a multiplicative model</strong></li>
<li><strong>Calculate the random component for a multiplicative model</strong> Random Error Term (Error Plot): <span class="math display">\[ e_t = \frac{x_t}{m_t \cdot s_t} \]</span></li>
<li><strong>Compute a seasonally-adjusted time series based on a multiplicative model</strong></li>
</ul>
<p>Random Error Term (Error Plot): <span class="math display">\[ e_t = \frac{x_t}{m_t \cdot s_t} \]</span></p>
<p>Trend: <span class="math display">\[ m_t = e^{a \cdot t} \]</span></p>
<p>Seasonal: <span class="math display">\[ s_t = e^{b \cdot \sin\left(\frac{2 \pi t}{12}\right) + c \cdot \cos\left(\frac{6 \pi t}{12}\right) + 1} \]</span></p>
Seasonally-Adjusted Time Series <span class="math display">\[ x_t = m_t \cdot s_t \cdot z_t \]</span>
</details>
<details>
<summary>
2.1: Compute &amp; Interpret the key statistics used to describe the linear relationship between two variables
</summary>
<ul>
<li>Compute &amp; Interpret the sample mean
<ul>
<li>It is just doing the mean of a variable. <span class="math display">\[ \bar{x} = \frac{1}{n} \sum_{i=1}^{n} x_i \]</span></li>
<li>Need to refresh of difference for doing stats on a sample vs a population</li>
</ul></li>
</ul>
<p>Sample Mean The <strong>sample mean</strong> <span class="math inline">\(\bar{x}\)</span> is the average value of the data points in the sample. It summarizes the central tendency and is computed as: <span class="math display">\[
\bar{x} = \frac{1}{n} \sum_{i=1}^n x_i
\]</span></p>
<hr>
<ul>
<li>Compute &amp; Interpret the sample variance</li>
</ul>
<p>Sample Variance The <strong>sample variance</strong> <span class="math inline">\(s^2\)</span> measures the spread of data around the sample mean. It quantifies variability and is calculated as: <span class="math display">\[
s^2 = \frac{1}{n-1} \sum_{i=1}^n (x_i - \bar{x})^2
\]</span> It provides insight into how much individual observations deviate from the average, capturing the data’s dispersion.</p>
<hr>
<ul>
<li>Compute &amp; Interpret the sample standard deviation</li>
</ul>
<p>Sample Standard Deviation The <strong>sample standard deviation</strong> <span class="math inline">\(s\)</span> is the square root of the sample variance: <span class="math display">\[
s = \sqrt{s^2}
\]</span> It represents the average deviation of data points from the mean in the same units as the original data, facilitating easier interpretation.</p>
<hr>
<ul>
<li>Compute &amp; Interpret the sample covariance</li>
</ul>
<p>Sample Covariance The <strong>sample covariance</strong> <span class="math inline">\(Cov(x, y)\)</span> quantifies the linear relationship between two variables <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>. It is calculated as: <span class="math display">\[
Cov(x, y) = \frac{1}{n-1} \sum_{i=1}^n (x_i - \bar{x})(y_i - \bar{y})
\]</span> A positive covariance indicates that <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> increase together, while a negative covariance suggests an inverse relationship.</p>
<hr>
<ul>
<li>Compute &amp; Interpret the sample correlation coefficient</li>
</ul>
<p>Sample Correlation Coefficient The <strong>sample correlation coefficient</strong> <span class="math inline">\(r\)</span> standardizes the covariance, giving a dimensionless measure of linear association between <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span>: <span class="math display">\[
r = \frac{Cov(x, y)}{s_x s_y}
\]</span> It ranges between <span class="math inline">\(-1\)</span> (perfect negative linear relationship) and <span class="math inline">\(+1\)</span> (perfect positive linear relationship), with <span class="math inline">\(0\)</span> indicating no linear relationship.</p>
<hr>
<ul>
<li>Explain sample covariance using a scatter plot</li>
</ul>
<p><a href="#fig-covarainceexplain" class="quarto-xref">Figure&nbsp;6</a></p>
<p>Covariance measures the linear relationship between two variables, x and y. It evaluates how changes in x correspond to changes in y:</p>
<ul>
<li><p>Positive covariance: y increases as x increases (points cluster in the lower-left and upper-right quadrants).</p></li>
<li><p>Negative covariance: y decreases as x increases (points cluster in the upper-left and lower-right quadrants).</p></li>
<li><p>Zero covariance: No linear relationship (points are scattered with no clear pattern).</p></li>
</ul>
<hr>
</details>
<details>
<summary>
2.2: Define key terms in time series analysis
</summary>
<ul>
<li><strong>Define the ensemble of a time series</strong> (2.2 2.2.2)
<ul>
<li>The ensemble of a time series is the set of all possible time series that could theoretically be generated by the underlying stochastic model. Each time series in the ensemble is a distinct realization of the model. For practical purposes, the ensemble represents the entire population of time series that share the same probability structure, even though we typically have access to only one observed realization in practice.</li>
</ul></li>
</ul>
<hr>
<ul>
<li><strong>Define the expected value (or mean function) of a time series model</strong> (2.2.2)</li>
</ul>
<p>The expected value of a time series model</p>
<p>The <strong>expected value</strong>, commonly abbreviated to expectation, E, of a variable, or a function of a variable, is its <em>mean</em> value in a population. So E(x) is the mean of x, denoted <span class="math inline">\(\mu\)</span>, and <span class="math display">\[E[(x - \mu)^2]\]</span> is the mean of the squared deviations about <span class="math inline">\(\mu\)</span>, better known as the variance <span class="math inline">\(\sigma^2\)</span> of x. The standard deviation, <span class="math inline">\(\sigma\)</span> is the square root of the variance.</p>
<p>The <strong>mean function</strong> of a time series model is, denoted <span class="math inline">\(\mu(t)\)</span>: <span class="math display">\[
\mu(t) = E[x_t]
\]</span> and, in general, is a function of t. The expectation in this definition is an average taken across the ensemble of all the possible time series that might have been produced by the time series model(see fig 2.2 in the book). The ensemble constitutes the entire population.</p>
<hr>
<ul>
<li><strong>Define the sample estimate of the population mean of a time series</strong> (2.2.2 e2.7)</li>
</ul>
<p>The <strong>sample estimate</strong> of the population mean is the arithmetic mean of the observed values in a single realization of the time series. It is calculated as: <span class="math display">\[
\bar{x} =  \sum_{t=1}^n \frac{x_t}{n}
\]</span> where <span class="math inline">\(n\)</span> is the number of observations. Equation (2.7) does rely on an assumption that a sufficiently long time series characterises the hypothetical model. Such models are known as <span style="color:purple;">ergodic</span><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, and the models in this book are all ergodic.</p>
<hr>
<ul>
<li><strong>Define the variance function of a time series model</strong> (2.2.1 2.2.4 e2.9)</li>
</ul>
<p>The <strong>variance function</strong> of a time series model, denoted <span class="math inline">\(\sigma^2(t)\)</span>, that is stationary in the mean is <span class="math display">\[
\sigma^2(t) = E[(x_t - \mu)^2]
\]</span> (is the mean of the squared deviations pdf pg 27)</p>
<p>which can, in principle, take a different value at every time t. But we cannot estimate a different variance at each time point from a single time series. To progress, we must make some simplifying assumption. If we assume the model is stationary in the variance, this constant population variance, σ2, can be estimated from the sample variance</p>
<hr>
<ul>
<li><strong>State the constant variance estimator for a time series model</strong></li>
</ul>
<p>The constant variance estimator? not sure about this one <span class="math display">\[
\hat{\sigma}^2 = \frac{1}{n-1} \sum_{t=1}^n (x_t - \bar{x})^2\]</span></p>
<hr>
<ul>
<li><strong>Explain the stationarity assumption</strong></li>
</ul>
<p>A time series is said to be <strong>stationary</strong> if its statistical properties, such as the mean, variance, and autocorrelation, are constant over time. <strong>Need to confirm this</strong></p>
<hr>
<ul>
<li><strong>Explain the stationary variance assumption</strong> (2.2.4 e2.9)</li>
</ul>
<p><strong>Not sure about this</strong> This can continue from the <span style="color:purple;">Variance Function</span> in equation 2.9 to 2.10 maybe.</p>
<p>The variance function of a time series model that is stationary in the mean is which can, in principle, take a different value at every time t. But we cannot estimate a different variance at each time point from a single time series. To progress, we must make some simplifying assumption. If we assume the model is stationary in the variance, this constant population variance, σ2, can be estimated from the sample variance:</p>
<hr>
<ul>
<li><strong>Define lag</strong></li>
</ul>
<p><strong>Lag</strong> refers to the time difference or the number of steps between two points in a time series. It is denoted by <span class="math inline">\(k\)</span> and often appears in contexts like autocorrelation or autocovariance calculations. For example:</p>
<ul>
<li>Lag <span class="math inline">\(k\)</span> compares <span class="math inline">\(x_t\)</span> with <span class="math inline">\(x_{t+k}\)</span>, where <span class="math inline">\(k\)</span> is the number of time steps separating the observations.</li>
</ul>
<hr>
<ul>
<li><strong>Define autocorrelation</strong></li>
</ul>
<p><strong>Autocorrelation</strong> A correlation of a variable with itself at different times is known as <span style="color:purple;">autocorrelation</span> or serial correlation. If a time series model is second-order stationary, we can define an autocovariance function (acvf), <span class="math inline">\(y_k\)</span>, as a function of the lag k.</p>
<hr>
<ul>
<li><strong>Second-Order Properties</strong></li>
</ul>
<p>The mean and variance play an important role in the study of statistical distributions because they summarise two key distributional properties– a central location and the spread. Similarly, in the study of time series models, a key role is played by the <span style="color:purple;">second-order properties</span>, which include the mean, variance, and serial correlation (described below).</p>
<p>Consider a time series model that is stationary in the mean and the variance. The variables may be correlated, and the model is second-order stationary if the correlation between variables depends only on the number of time steps separating them. The number of time steps between the variables is known as the lag. A correlation of a variable with itself at different times is known as autocorrelation or serial correlation. If a time series model is second-order stationary, we can define an <span style="color:purple;">autocovariance function</span> (acvf), <span class="math inline">\(y_k\)</span>, as a function of the lag <span class="math inline">\(k\)</span> (e2.11):</p>
<p><span class="math display">\[
\gamma(k) = E[(x_t - \mu)(x_{t+k} - \mu)]
\]</span></p>
<p>The function <span class="math inline">\(\gamma_k\)</span> does not depend on t because the expectation, which is across the ensemble, is the same at all times t. This definition follows naturally from Equation (2.1) by replacing <span class="math inline">\(x\)</span> with <span class="math inline">\(x_t\)</span> and <span class="math inline">\(y\)</span> with <span class="math inline">\(x_{t+k}\)</span> and noting that the mean <span class="math inline">\(\mu\)</span> is the mean of both <span class="math inline">\(x_t\)</span> and <span class="math inline">\(x_{t+k}\)</span>. The lag <span class="math inline">\(k\)</span> <span style="color:purple;">autocorrelation function</span> (acf), <span class="math inline">\(p_k\)</span>, is defined by(e2.12)</p>
<p><span class="math display">\[
\rho_k = \frac{\gamma_k}{\sigma^2}
\]</span></p>
<p>It follows from the definition that <span class="math inline">\(p_0\)</span> is 1.</p>
<p>It is possible to set up a second-order stationary time series model that has skewness; for example, one that depends on time t. Applications for such models are rare, and it is customary to drop the term ‘second-order’ and use ‘stationary’ on its own for a time series model that is at least second order stationary. The term <span style="color:pink;">strictly stationary</span> is reserved for more rigorous conditions. The <strong>acvf</strong> and <strong>acf</strong> can be estimated from a time series by their sample equivalents. The sample <strong>acvf</strong>, <span class="math inline">\(c_k\)</span>, is calculated as (e2.13)</p>
<p><span class="math display">\[
c_k = \frac{1}{n} \sum_{t=1}^{n-k} (x_t - \bar{x})(x_{t+k} - \bar{x})
\]</span></p>
<p>Note that the autocovariance at lag 0, <span class="math inline">\(c_0\)</span>, is the variance calculated with a denominator <span class="math inline">\(n\)</span>. Also, a denominator <span class="math inline">\(n\)</span> is used when calculating <span class="math inline">\(c_k\)</span>, although only <span class="math inline">\(n − k\)</span> terms are added to form the numerator. Adopting this definition constrains all sample autocorrelations to lie between −1 and 1. The <strong>sample acf</strong> is defined as (e2.14)</p>
<p><span class="math display">\[
r_k = \frac{c_k}{c_0}
\]</span></p>
<hr>
<ul>
<li><strong>Define the second-order stationary time series</strong></li>
</ul>
<p>A time series model is <strong>second-order stationary</strong> if it satisfies the following conditions:</p>
<ol type="1">
<li><p>The mean and variance are constant over time.</p></li>
<li><p>The correlation between variables depends only on the lag <span class="math inline">\(k\)</span>, which is the number of time steps separating them.</p></li>
</ol>
<p>The <strong>autocovariance function</strong> (acvf), <span class="math inline">\(\gamma_k\)</span>, is defined as:</p>
<ul>
<li>The <strong>acvf</strong>, <span class="math inline">\(\gamma_k\)</span>, quantifies the covariance between observations separated by a lag <span class="math inline">\(k\)</span>, and it does not depend on the specific time <span class="math inline">\(t\)</span>. This ensures the temporal consistency required for second-order stationarity: (e2.11)</li>
</ul>
<p><span class="math display">\[
\gamma(k) = E[(x_t - \mu)(x_{t+k} - \mu)]
\]</span></p>
<p>The <span style="color:pink;"><strong>autocorrelation function</strong></span> (acf), <span class="math inline">\(\rho_k\)</span>, is: (e2.12)</p>
<ul>
<li>The <strong>acf</strong>, <span class="math inline">\(\rho_k\)</span>, normalizes the autocovariance by the variance, providing a dimensionless measure of the strength and direction of the relationship between observations at lag <span class="math inline">\(k\)</span>:</li>
</ul>
<p><span class="math display">\[
\rho_k = \frac{\gamma_k}{\sigma^2}
\]</span></p>
<hr>
<ul>
<li><strong>Define the autocovariance function, acvf</strong>(2.2.5 e2.11)</li>
</ul>
<p>The <strong>acvf</strong> quantifies the covariance between observations separated by a lag <span class="math inline">\(k\)</span>, and it does not depend on the specific time <span class="math inline">\(t\)</span>. This ensures the temporal consistency required for second-order stationarity</p>
<hr>
<ul>
<li><strong>Explain the autocovariance (acvf) function in Equation</strong> (2.2.5 e2.11)</li>
</ul>
<p>We can define the autocovariance function (acvf), <span class="math inline">\(\gamma_k\)</span>, as a function of the lag k:</p>
<p><span class="math display">\[
\gamma_k = E[(x_t - \mu)(x_{t+k} - \mu)]
\]</span></p>
<p>need to add what the variables do.</p>
<hr>
<ul>
<li><strong>Explain the lag k autocorrelation (acf) function in Equation</strong> (2.12)</li>
</ul>
<p>The lag <span class="math inline">\(k\)</span> autocorrelation function is the normalized version of the autocovariance function, defined as:</p>
<p><span class="math display">\[
\rho(k) = \frac{\gamma(k)}{\sigma^2}
\]</span></p>
<ul>
<li><p>not sure how reliable this explanation is, but leaving since it seems correct, but it is all from ai, just need to confirm.</p></li>
<li><p><span class="math inline">\(\rho(k)\)</span> measures the strength of linear association between observations <span class="math inline">\(k\)</span> units apart, scaled to lie between <span class="math inline">\(-1\)</span> and <span class="math inline">\(1\)</span>.</p></li>
<li><p>A value of <span class="math inline">\(+1\)</span> or <span class="math inline">\(-1\)</span> indicates perfect positive or negative linear correlation, respectively, while <span class="math inline">\(0\)</span> indicates no linear relationship.</p></li>
<li><p>It simplifies the interpretation of autocovariance by removing the influence of scale.</p></li>
</ul>
<hr>
<ul>
<li><strong>Define the sample acvf, ck</strong> (2.2.5 e2.13)</li>
</ul>
<p>The sample autocovariance function (<em>acvf</em>)</p>
<p><span class="math display">\[
c_k = \frac{1}{n} \sum_{t=1}^{n-k} (x_t - \bar{x})(x_{t+k} - \bar{x})
\]</span></p>
<hr>
<ul>
<li><strong>Define the sample autocorrelation function, acf</strong> (2.2.5 e2.14)</li>
</ul>
<p>The <strong>sample autocorrelation function</strong> (acf).</p>
<p><span class="math display">\[
r_k = \frac{c_k}{c_0}
\]</span></p>
<hr>
<p>Important for 2.2 outcomes</p>
<p>The covariance is a measure of linear association between two variables (x, y). (2.2.1)</p>
</details>
<details>
<summary>
2.2: Calculate sample estimates of autocovariance and autocorrelation functions from time series data
</summary>
<ul>
<li><strong>Define the sample autocovariance function, c_k</strong></li>
<li><strong>Define the sample autocorrelation function, r_k</strong></li>
</ul>
</details>
<section id="index" class="level1">
<h1>index</h1>
<p>This is code and definitions use in outcomes</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-stochastic" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-stochastic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-stochastic-1.png" id="fig-stochastic" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-stochastic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-deterministic" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-deterministic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-deterministic-1.png" id="fig-deterministic" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-deterministic-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-cma" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-cma-1.png" id="fig-cma" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-cma-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-cmaboxplot" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cmaboxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-cmaboxplot-1.png" id="fig-cmaboxplot" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-cmaboxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-seasonallyadjustedts" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-seasonallyadjustedts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-seasonallyadjustedts-1.png" id="fig-seasonallyadjustedts" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-seasonallyadjustedts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5
</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="fig-covarainceexplain" class="quarto-float quarto-figure quarto-figure-center anchored" width="672">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-covarainceexplain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="outcomes_files/figure-html/fig-covarainceexplain-1.png" id="fig-covarainceexplain" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-covarainceexplain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6
</figcaption>
</figure>
</div>
</div>
</div>



</section>


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><span style="color:purple;">A time series model that is stationary in the mean is ergodic in the mean if the time average for a single time series tends to the ensemble mean as the length of the time series increases (2.2 2.2.3).</span><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Eduardo Ramirez 2024©</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/eduardo-ramirez-lds">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>