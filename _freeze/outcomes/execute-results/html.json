{
  "hash": "799f792f7472cbc8417af1e24774ad41",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Applied Time Series Analysis Outcomes\"\nsubtitle: \"MATH 494R\"\nformat: \n  html:\n    error: false\n    message: false\n    warning: false\n    toc: true\n    code-fold: true\n    math: katex # katex, mathjax, none \n---\n\n\n\n\n<!-- add eval: false when working on this so it renders faster -->\n\n<details>\n\n<summary>**1.2: Use technical language to describe the main features of time series data**</summary>\n\n-   **Define time series analysis**\n    -   A time series analysis quantifies the main features in data and the random variation. These reasons, combined with improved computing power, have made time series methods widely applicable in government, industry, and commerce.\n-   **Define time series**\n    -   Time series are analysed to understand the past and to predict the future, enabling managers or policy makers to make properly informed decisions.\n-   **Define sampling interval**\n    -   When a variable is measured sequentially in time over or at a fixed interval, known as the sampling interval, the resulting data form a time series.\n-   **Define serial dependence or autocorrelation**\n    -   A correlation of a variable with itself at different times is known as autocorrelation or serial correlation.\n-   **Define a time series trend**\n    -   In general, a systematic change in a time series that does not appear to be periodic is known as a trend. The simplest model for a trend is a linear increase or decrease, and this is often an adequate approximation.\n-   **Define seasonal variation**\n    -   Repeated pattern within each year (or any other fixed time period).\n-   **Define cycle**\n    -   Repeated pattern that does not correspond to some fixed natural period.\n-   **Differentiate between deterministic and stochastic trends**\n    -   Stochastic Trend: Random trend that does not follow a discernible or predictable pattern. @fig-stochastic\n    -   Deterministic Trend: Can be modeled with mathematical functions, facilitating the long-term prediction of the behavior. @fig-deterministic\n\n</details>\n\n<details>\n\n<summary>1.2: **Plot time series data to visualize trends, seasonal patterns, and potential outliers**</summary>\n\n-   Plot a \"ts\" object\n-   Plot the estimated trend of a time series by computing the mean across one full period\n\n</details>\n\n<details>\n\n<summary>1.3: **Decompose time series into trends, seasonal variation, and residuals**</summary>\n\n-   **Define smoothing**\n    -   The centred moving average is an example of a smoothing procedure that is applied retrospectively to a time series with the objective of identifying an underlying signal or trend.\n-   **Compute the centered moving average for a time series**\n    -   $\\hat m_t = \\dfrac{\\frac{1}{2}x_{t-6} + x_{t-5} + \\cdots + x_{t-1} + x_t + x_{t+1} + \\cdot + x_{t+5} + \\frac{1}{2} x_{t+6}}{12}$.\n-   **Estimate the trend component using moving averages**\n    -   There are various ways to estimate the trend $m_t$ at time t, but a relatively simple procedure, is just use the cma formula for $x_t$. Orange line = CMA. @fig-cma\n\n</details>\n\n<details>\n\n<summary>1.3 **Plot time series data to visualize trends, seasonal patterns, and potential outliers**</summary>\n\n-   **Plot the estimated trend of a time series using a moving average.**\n-   **Make box plots to examine seasonality.**\n-   **Interpret the trend and seasonal pattern observed in a time series**\n    -   Trend is increasing over time, and there is a seasonal pattern that repeats every 12 months. The trend is estimated using a centred moving average, and the seasonal pattern is visualized using box plots. @fig-cma @fig-cmaboxplot\n\n</details>\n\n<details>\n\n<summary>1.4: **Use R to describe key features of time series data**</summary>\n\n-   Import CSV data and convert to tsibble format\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"false\"}\n# Weather data for Rexburg\nmonthly_tsibble <- rio::import(\"https://byuistats.github.io/timeseries/data/rexburg_weather.csv\") |> \n  # Convert 'dates' to Date format\n  mutate(date2 = ymd(dates)) |>\n  # Extract year and month from 'date2'\n  mutate(year_month = yearmonth(date2)) |>\n  # Group data by 'year_month'\n  group_by(year_month) |>\n  # Calculate mean of 'rexburg_airport_high' for each group\n  summarize(average_daily_high_temp = mean(rexburg_airport_high)) |>\n  # Remove grouping\n  ungroup() |> \n  # Convert data frame to time series tibble\n  as_tsibble(index = year_month)\n\n # Display the resulting tibble\n view(monthly_tsibble) \n```\n:::\n\n\n\n\n</details>\n\n<details>\n\n<summary>1.4: **Decompose time series into trends, seasonal variation, and residuals**</summary>\n\n-   **Implement additive decomposition**\n    -   A simple additive decomposition model is given by $x_t = m_t + s_t + r_t$, where $m_t$ is the trend, $s_t$ is the seasonal component, and $r_t$ (or in the book: where $z_t$ is an error term) is the random component. (1.5.2)\n-   **Explain how to remove seasonal variation using an estimate for seasonal component of a time series**\n    -   To remove the seasonal variation from a time series, we can subtract the estimated seasonal component from the original time series. This results in a seasonally-adjusted time series that can be used for further analysis.\n    -   It is common to present economic indicators, such as unemployment percentages, as seasonally adjusted series.This highlights any trend that might otherwise be masked by seasonal variation attributable, for instance, to the end of the academic year, when school and university leavers are seeking work. (1.5.3)\n-   **Compute the estimators of seasonal variation for an additive model**\n    -   $\\hat s_t$: The centered moving average, $\\hat m_t$, is then used to compute the monthly additive effect, $\\hat s_t$.\n\n    -   $\\bar {\\hat s_t}$: calculate the mean of the $\\hat s_t$ values for each month. We will call this $\\bar {\\hat s_t}$,\n\n    -   $\\bar{\\bar {\\hat s_t}}$: the unadjusted monthly additive components.\n\n        $$\n          \\bar s_t = \\bar {\\hat s_t} - \\bar{\\bar {\\hat s_t}}\n        $$\n\n   where $\\bar {\\hat s_t}$ is the mean of the $\\hat s_t$ values corresponding to month $t$, and $\\bar{\\bar {\\hat s_t}}$ is the mean of the $\\bar {\\hat s_t}$ values.\n\n   -   $\\bar s_t$: This yields $\\bar s_t$, the seasonally adjusted mean for each month.\n  \n-   **Calculate the random component for an additive model**\n    -   We calculate the random component by subtracting the trend and seasonally adjusted mean from the time series:\n\n        $$\n          \\text{random component} = x_t - \\hat m_t - \\bar s_t\n        $$\n-   **Compute a seasonally-adjusted time series based on an additive model**\n    -   The seasonally adjusted series is computed by subtracting $\\bar s_t$ from each of the observed values:\n\n        $$\n          \\text{seasonally adjusted series} = x_t - \\bar s_t\n        $$. The figure below illustrates the original time series (in black), the centered moving average $\\hat m_t$ (in blue), and the seasonally adjusted series (in red). @fig-seasonallyadjustedts\n\n</details>\n\n<details>\n\n<summary>1.5: **Decompose time series into trends, seasonal variation, and residuals**</summary>\n\n-   **Explain the differences between additive and multiplicative models**\n    -   in Models where they are dominated by a trend and or seasonal effect, then classical additive/multiplicative models are more common.\n    -   **Multiplicative** Model : R's multiplicative model: this implies that the error term, $z_t$ (or $r_t$), has a mean of 1, rather than 0.\n    -   **Additve** model $x_t = m_t + s_t + z_t$ vs **multiplicative** book $x_t = m_t * s_t + z_t$ or **multiplicative r** define as $x_t = m_t * s_t * z_t$\n    -   <span style=\"color:purple;\">**Seasonal Component**</span>\n        -   **Additive**:$s_t = \\sin \\left( \\frac{t\\pi}{6} \\right) + \\frac{1}{2}\\cos\\left(\\frac{t \\pi}{18} \\right)$\n\n\n\n\n            The r seasonal formula in the code corresponds to: $$s_t = b \\sin \\left( \\frac{t}{12} \\cdot 2 \\pi \\right) + c \\cos \\left( \\frac{t}{12} \\cdot 2 \\pi \\cdot 3 \\right)$$\n\n            *Components:*\n\n            1.  Sinusoidal Component:\\\n                $$b \\sin \\left( \\frac{t}{12} \\cdot 2 \\pi \\right)$$\n                -   $b = 1$: The amplitude of the sine wave.\n                -   $\\frac{t}{12} \\cdot 2 \\pi$: Converts $t$, the month number, into a cycle based on a 12-month period.\n            2.  Cosine Component: $$c \\cos \\left( \\frac{t}{12} \\cdot 2 \\pi \\cdot 3 \\right)$$\n                -   $c = 0.5$: The amplitude of the cosine wave.\n                -   $\\frac{t}{12} \\cdot 2 \\pi \\cdot 3$: Introduces a higher frequency cycle over the same 12-month period.\n\n        -   **Additive Seasonal Component**: $s_t$ $$\\text{seasonally adjusted series}  s_t = x_t - \\bar s_t$$\n            - Seasonally Adjusted Means $\\bar s_t$ $$\n  \\bar s_t = \\bar {\\hat s_t} - \\bar{\\bar {\\hat s_t}}\n$$ where $\\bar {\\hat s_t}$ is the mean of the $\\hat s_t$ values corresponding to month $t$, and $\\bar{\\bar {\\hat s_t}}$ is the mean of the $\\bar {\\hat s_t}$ values.\n\n            - Montly Additive Effect $\\hat s_t$ \n            $$\n  \\hat s_t = x_t - \\hat m_t\n            $$ The centered moving average, $\\hat m_t$, is then used to compute the monthly additive effect, $\\hat s_t$\n\n        -   spacer\n        \n        -   **Multiplicative Seasonal Component** $s_t$\n\n            - Seasonally Adjusted Means $\\bar s_t$ $$ \\bar s_t = \\frac{ \\left( \\bar {\\hat s_t} \\right) }{ \\left( \\bar {\\bar {\\hat s_t}} \\right) } $$ Divide each of the $\\bar {\\hat s_t}$ values by $\\bar {\\bar {\\hat s_t}}$ to get $\\bar s_t$, the seasonally adjusted factor for quarter $t$. (Note that the mean of the $\\bar s_t$ values will be 1.) \n            $\\bar {\\hat s_t}$ = mean($\\hat s_t$) (unique like mean of Jan or mean of 1st Q)\n$\\bar {\\bar {\\hat s_t}}$ = mean($\\bar {\\hat s_t}$) - overallmean mean of $\\bar {\\hat s_t}$\n\n\n            - Monthly/quaterly Adjusted Means $\\hat s_t$: \n            $$\n              \\hat s_t = \\dfrac{ x_t }{ \\hat m_t }\n            $$ \n            The centered moving average, $\\hat m_t$, is then used to compute the quarterly multiplictive effect, $\\hat s_t$:\n            - Centered MA is calculated the same way as additive for this step. \n            \n\n\n\n              ::: {.cell}\n              \n              ```{.r .cell-code}\n              # 1.5 lesson code sample\n              # computes the 4-quarter centered moving average (m_hat)\n              apple_ts $% apple_ts |> \n                mutate(\n                  m_hat = (\n                        (1/2) * lag(revenue, 2)\n                        + lag(revenue, 1)\n                        + revenue\n                        + lead(revenue, 1)\n                        + (1/2) * lead(revenue, 2)\n                      ) / 4\n                )\n              ```\n              :::\n\n\n\n\n\n        -   spacer\n\n\n\n        -   spacer\n\n\n\n        -   **Multiplicative** The seasonal formula in the multiplicative model corresponds to: $$s_t = e^{b \\sin \\left( \\frac{t}{12} \\cdot 2 \\pi \\right) + c \\cos \\left( \\frac{t}{12} \\cdot 2 \\pi \\cdot 3 \\right) + 1}$$\n\n            Components:\n\n            1.  **Exponential Seasonal Component**:\\\n                $$ \n                e^{b \\sin \\left( \\frac{t}{12} \\cdot 2 \\pi \\right) + c \\cos \\left( \\frac{t}{12} \\cdot 2 \\pi \\cdot 3 \\right) + 1} \n                $$\n                -   $b = 1$: The amplitude of the sine wave.\\\n                -   $c = 0.5$: The amplitude of the cosine wave.\\\n                -   $\\frac{t}{12} \\cdot 2 \\pi$: Converts $t$, the month number, into a 12-month sinusoidal cycle.\n                -   $\\frac{t}{12} \\cdot 2 \\pi \\cdot 3$: Introduces a higher frequency cycle over the same 12-month period.\\\n                -   $+1$: Ensures the seasonal component is strictly positive.\n            2.  **Multiplicative Combination**:\n                -   The seasonal component $s_t$ is multiplied with the trend $m_t$ and error term $z_t$ to construct the time series: $$\n                    x_t = m_t \\cdot s_t \\cdot z_t\n                    $$\n    -   <span style=\"color:purple;\">**Random Component**</span> $r_t$ or $z_t$\n        -   additive: $r_t = x_t - \\hat m_t - \\bar s_t$ spacer $$r_t = x_t - \\hat m_t - \\bar s_t$$\n        \n        -   multiplicative:\n\n$$ ignore this money signs (see source comment) <!-- this money signs are needed to cancel out two previously use so the red txt can go away. gotta fixed this later but cant spend to much time on it now -->\n\n\n$$z_t = \\dfrac{ x_t }{ \\hat m_t \\cdot \\bar s_t }$$\n\n-   **Implement multiplicative decomposition**\nThis can be found in code for chapter 1, and by reviewing the lesson 1.5 code. \n-   **Compute the estimators of seasonal variation for a multiplicative model**\n-   **Calculate the random component for a multiplicative model**\nRandom Error Term (Error Plot):\n$$ e_t = \\frac{x_t}{m_t \\cdot s_t} $$\n-   **Compute a seasonally-adjusted time series based on a multiplicative model**\n\nRandom Error Term (Error Plot):\n$$ e_t = \\frac{x_t}{m_t \\cdot s_t} $$\n\nTrend:\n$$ m_t = e^{a \\cdot t} $$\n\nSeasonal:\n$$ s_t = e^{b \\cdot \\sin\\left(\\frac{2 \\pi t}{12}\\right) + c \\cdot \\cos\\left(\\frac{6 \\pi t}{12}\\right) + 1} $$\n\nSeasonally-Adjusted Time Series\n$$ x_t = m_t \\cdot s_t \\cdot z_t $$\n</details>\n\n\n\n\n\n\n\n\n\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](outcomes_files/figure-html/fig-stochastic-1.png){#fig-stochastic width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](outcomes_files/figure-html/fig-deterministic-1.png){#fig-deterministic width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](outcomes_files/figure-html/fig-cma-1.png){#fig-cma width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](outcomes_files/figure-html/fig-cmaboxplot-1.png){#fig-cmaboxplot width=672}\n:::\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n![](outcomes_files/figure-html/fig-seasonallyadjustedts-1.png){#fig-seasonallyadjustedts width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}