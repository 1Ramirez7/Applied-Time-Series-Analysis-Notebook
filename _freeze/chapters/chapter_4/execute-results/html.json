{
  "hash": "99175786c48ea02ca62d52b78d5945de",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Chapter overview and Task\"\nsubtitle: \"Chapter 4\"\nformat: \n  html:\n    error: false\n    message: false\n    warning: false\n    embed-resources: true\n    toc: true\n    code-fold: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading R packages\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(tidyverse,\n               tsibble, fable,\n               feasts, tsibbledata,\n               fable.prophet,\n               patchwork,\n               lubridate,\n               rio,\n               ggplot2, knitr,\n               kableExtra\n               )\n```\n:::\n\n\n\n\n\nThis is the overview of the chapter 4. I will add info from the index file here. I will filter from there to what will go here.\nMy goal is to first have the website have a map of the concepts in time series. I want to first avoid doing it by chapters since it seperates topics and limit my learning to that lesson. Bigger picture first.\n\n\n\nAdding this from homework_4_0 chapter notes.qmd file in old repo. \nThis are notes intended to connect time series concepts\n\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load necessary library\n\n# Define the checklist table\nchecklist_data <- data.frame(\n  Topic = c(\"Trend\", \"Seasonality\", \"Stationarity\", \"White Noise\", \"Serial Correlation\", \"Drift\"),\n  Description = c(\n    \"Presence of an upward or downward movement over time.\",\n    \"Repeating patterns at regular intervals.\",\n    \"Mean, variance, and autocorrelation are constant over time.\",\n    \"Residuals are independent, identically distributed with mean zero.\",\n    \"Past values are correlated with current values.\",\n    \"Consistent positive or negative change over time.\"\n  ),\n  White_Noise = c(\"\", \"\", \"✔\", \"✔\", \"\", \"\"),\n  Random_Walk = c(\"\", \"\", \"\", \"\", \"✔\", \"\"),\n  RW_with_Drift = c(\"\", \"\", \"\", \"\", \"✔\", \"✔\"),\n  AR_p = c(\"✔\", \"\", \"✔\", \"\", \"✔\", \"\"),\n  ARIMA = c(\"\", \"\", \"✔\", \"\", \"✔\", \"\"),\n  Holt_Winters = c(\"✔\", \"✔\", \"✔\", \"\", \"✔\", \"\")\n)\n\n# Render the table\nkable(checklist_data, format = \"html\", escape = F) %>%\n  kable_styling(full_width = FALSE, bootstrap_options = c(\"striped\", \"hover\"))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped table-hover\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Topic </th>\n   <th style=\"text-align:left;\"> Description </th>\n   <th style=\"text-align:left;\"> White_Noise </th>\n   <th style=\"text-align:left;\"> Random_Walk </th>\n   <th style=\"text-align:left;\"> RW_with_Drift </th>\n   <th style=\"text-align:left;\"> AR_p </th>\n   <th style=\"text-align:left;\"> ARIMA </th>\n   <th style=\"text-align:left;\"> Holt_Winters </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Trend </td>\n   <td style=\"text-align:left;\"> Presence of an upward or downward movement over time. </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Seasonality </td>\n   <td style=\"text-align:left;\"> Repeating patterns at regular intervals. </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Stationarity </td>\n   <td style=\"text-align:left;\"> Mean, variance, and autocorrelation are constant over time. </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> White Noise </td>\n   <td style=\"text-align:left;\"> Residuals are independent, identically distributed with mean zero. </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Serial Correlation </td>\n   <td style=\"text-align:left;\"> Past values are correlated with current values. </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Drift </td>\n   <td style=\"text-align:left;\"> Consistent positive or negative change over time. </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> ✔ </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n# Time Series Model Checklist\n\n| Topic | Description | White Noise | Random Walk | RW with Drift | AR(p) | ARIMA | Holt-Winters |\n|--------------|-----------------------------|--------|--------|---------|--------|--------|--------|\n| **Trend** | Presence of an upward or downward movement over time. |  |  |  | ✔ |  | ✔ |\n| **Seasonality** | Repeating patterns at regular intervals. |  |  |  |  |  | ✔ |\n| **Stationarity** | Mean, variance, and autocorrelation are constant over time. | ✔ |  |  | ✔ | ✔ | ✔ |\n| **White Noise** | Residuals are independent, identically distributed with mean zero. | ✔ |  |  |  |  |  |\n| **Serial Correlation** | Past values are correlated with current values. |  | ✔ | ✔ | ✔ | ✔ | ✔ |\n| **Drift** | Consistent positive or negative change over time. |  |  | ✔ |  |  |  |\n\nspacer\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntemps_ts <- rio::import(\"https://byuistats.github.io/timeseries/data/global_temparature.csv\") |>\n  as_tsibble(index = year)\n\ntemps_ts |> autoplot(.vars = change) +\n    labs(\n      x = \"Year\",\n      y = \"Temperature Change (Celsius)\",\n      title = paste0(\"Change in Mean Annual Global Temperature (\", min(temps_ts$year), \"-\", max(temps_ts$year), \")\")\n    ) +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(hjust = 0.5)\n    )\n```\n\n::: {.cell-output-display}\n![](chapter_4_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# second r chunk\npacf(temps_ts$change)\n```\n\n::: {.cell-output-display}\n![](chapter_4_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# 3rd r chunk\nglobal_ar <- temps_ts |>\n    model(AR(change ~ order(1:9)))\ntidy(global_ar)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 7 × 6\n  .model                  term     estimate std.error statistic  p.value\n  <chr>                   <chr>       <dbl>     <dbl>     <dbl>    <dbl>\n1 AR(change ~ order(1:9)) constant   0.0190   0.00881     2.15  3.30e- 2\n2 AR(change ~ order(1:9)) ar1        0.656    0.0841      7.80  1.40e-12\n3 AR(change ~ order(1:9)) ar2       -0.0662   0.100      -0.659 5.11e- 1\n4 AR(change ~ order(1:9)) ar3        0.140    0.0988      1.42  1.58e- 1\n5 AR(change ~ order(1:9)) ar4        0.265    0.0995      2.67  8.58e- 3\n6 AR(change ~ order(1:9)) ar5       -0.163    0.102      -1.60  1.11e- 1\n7 AR(change ~ order(1:9)) ar6        0.206    0.0863      2.38  1.85e- 2\n```\n\n\n:::\n\n```{.r .cell-code}\n# 4th r chunk\nalphas <- global_ar |> coefficients() |> tail(-1) |> dplyr::select(estimate) |> pull()\ncat(\n  \"0 = 1\", \n        \"- (\", alphas[1], \") * x\",\n        \"- (\", alphas[2], \") * x^2\",\n        \"- (\", alphas[3], \") * x^3\",\n        \"\\n     \",\n        \"- (\", alphas[4], \") * x^4\",\n        \"- (\", alphas[5], \") * x^5\",\n        \"- (\", alphas[6], \") * x^6\"\n)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0 = 1 - ( 0.6559292 ) * x - ( -0.06617426 ) * x^2 - ( 0.140204 ) * x^3 \n      - ( 0.2653744 ) * x^4 - ( -0.1627911 ) * x^5 - ( 0.2056924 ) * x^6\n```\n\n\n:::\n\n```{.r .cell-code}\nalphas\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1]  0.65592918 -0.06617426  0.14020403  0.26537444 -0.16279106  0.20569242\n```\n\n\n:::\n\n```{.r .cell-code}\n# 5th r chunk\n\ntemps_forecast <- global_ar |> forecast(h = \"50 years\")\ntemps_forecast |>\n  autoplot(temps_ts, level = 95) +\n  geom_line(aes(y = .fitted, color = \"Fitted\"),\n    data = augment(global_ar)) +\n  scale_color_discrete(name = \"\") +\n  labs(\n    x = \"Year\",\n    y = \"Temperature Change (Celsius)\",\n    title = paste0(\"Change in Mean Annual Global Temperature (\", min(temps_ts$year), \"-\", max(temps_ts$year), \")\"),\n    subtitle = paste0(\"50-Year Forecast Based on our AR(\", tidy(global_ar) |> as_tibble() |> dplyr::select(term) |> tail(1) |> stringr::str_sub(1), \") Model\")\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(hjust = 0.5),\n    plot.subtitle = element_text(hjust = 0.5)\n  )\n```\n\n::: {.cell-output-display}\n![](chapter_4_files/figure-html/unnamed-chunk-3-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Import and prepare the data\ntemps_ts <- rio::import(\"https://byuistats.github.io/timeseries/data/global_temparature.csv\") |>\n  as_tsibble(index = year)\n\n# Fit an AR model to the 'change' variable\nar_fit <- ar(temps_ts$change, method = \"mle\", na.action = na.omit)\n\n# Extract and display the order and coefficients\norder <- ar_fit$order\ncoefficients <- ar_fit$ar\n\ncat(\"Order of the fitted AR model: \", order, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nOrder of the fitted AR model:  4 \n```\n\n\n:::\n\n```{.r .cell-code}\ncat(\"Coefficients of the AR model: \", coefficients, \"\\n\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nCoefficients of the AR model:  0.6770191 -0.03582926 0.1560533 0.1929323 \n```\n\n\n:::\n\n```{.r .cell-code}\n# Visualization of the original data\ntemps_ts |> autoplot(.vars = change) +\n    labs(\n      x = \"Year\",\n      y = \"Temperature Change (Celsius)\",\n      title = paste0(\"Change in Mean Annual Global Temperature (\", min(temps_ts$year), \"-\", max(temps_ts$year), \")\")\n    ) +\n    theme_minimal() +\n    theme(\n      plot.title = element_text(hjust = 0.5)\n    )\n```\n\n::: {.cell-output-display}\n![](chapter_4_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}