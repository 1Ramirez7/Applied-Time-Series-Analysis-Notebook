{
  "hash": "61d4727d80b73a4657d62f427c7209ab",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Linear Models, GLS, and Seasonal Indicator Variables\"\nsubtitle: \"Ch 5.1 Code Notes\"\nformat: \n  html:\n    error: false\n    message: false\n    warning: false\n    embed-resources: true\n    toc: true\n    code-fold: false\n---\n\n\n\n\n\n\ntransfer from chapter_5_lesson_1_notes.qmd old repo\n\nnotes taken during class\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading R packages\nif (!require(\"pacman\")) install.packages(\"pacman\")\npacman::p_load(tidyverse,\n               tsibble, fable,\n               feasts, tsibbledata,\n               fable.prophet,\n               patchwork,\n               lubridate,\n               rio,\n               ggplot2,\n               kableExtra\n               )\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nchocolate_month2 <- rio::import(\"https://byuistats.github.io/timeseries/data/chocolate.csv\") |>\n  mutate(\n    dates = yearmonth(ym(Month)),\n    month = month(dates),\n    year = year(dates),\n    stats_time = year + (month - 1) / 12,\n    month_seq = 1:n()\n  ) |>\n  mutate(month = factor(month)) |>\n  as_tsibble(index = dates)\n\n# Fit regression model\nchocolate_lm <- chocolate_month2 |>\n  model(TSLM(chocolate ~ 0 + stats_time + month))\n\n# Estimated parameter values\nparam_est <- chocolate_lm |>\n  tidy() |>\n  pull(estimate)\n\nparam_est\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1]     1.131642 -2227.910370 -2219.304673 -2233.148977 -2233.443280\n [6] -2234.837584 -2237.931887 -2236.476190 -2237.370494 -2237.514797\n[11] -2232.659101 -2223.003404 -2200.097708\n```\n\n\n:::\n:::\n\n\n\n\n\n\nwhen removing 0 + from the tslm function. it makes january as the mt\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nchocolate_month2 |> # <- #1 rio::import(\"https://byuistats.github.io/timeseries/data/chocolate.csv\") |>\n  mutate(\n    dates = yearmonth(ym(Month)),\n    month = month(dates),\n    year = year(dates),\n    stats_time = year + (month - 1) / 12,\n    month_seq = 1:n()\n  ) |> #2\n  mutate(month = factor(month)) |> # factor converts numerical month into categorical levels. eg january = 1. so this parts gets us b1 jan + b2 feb ... + b12 dec. \n  as_tsibble(index = dates)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tsibble: 240 x 7 [1M]\n   Month   chocolate    dates month  year stats_time month_seq\n   <chr>       <int>    <mth> <fct> <dbl>      <dbl>     <int>\n 1 2004-01        36 2004 Jan 1      2004      2004          1\n 2 2004-02        45 2004 Feb 2      2004      2004.         2\n 3 2004-03        29 2004 Mar 3      2004      2004.         3\n 4 2004-04        32 2004 Apr 4      2004      2004.         4\n 5 2004-05        29 2004 May 5      2004      2004.         5\n 6 2004-06        26 2004 Jun 6      2004      2004.         6\n 7 2004-07        27 2004 Jul 7      2004      2004.         7\n 8 2004-08        27 2004 Aug 8      2004      2005.         8\n 9 2004-09        29 2004 Sep 9      2004      2005.         9\n10 2004-10        33 2004 Oct 10     2004      2005.        10\n# â„¹ 230 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\n# Fit regression model\nchocolate_lm <- chocolate_month2 |>\n  model(TSLM(chocolate ~ stats_time + month))\n\n# Estimated parameter values\nparam_est <- chocolate_lm |>\n  tidy() |>\n  pull(estimate)\n\nparam_est\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] -2227.910370     1.131642     8.605697    -5.238607    -5.532910\n [6]    -6.927214   -10.021517    -8.565821    -9.460124    -9.604428\n[11]    -4.748731     4.906965    27.812662\n```\n\n\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}