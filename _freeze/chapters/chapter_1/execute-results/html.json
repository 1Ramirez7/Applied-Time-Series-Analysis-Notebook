{
  "hash": "64bbf0cf3df233266e9cb7cce51409e2",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Chapter overview and Task\"\nsubtitle: \"Chapter 1\"\nformat: \n  html:\n    error: false\n    message: false\n    warning: false\n    embed-resources: true\n    toc: true\n    code-fold: true\n---\n\n\n\nThis is the overview of the chapter 4. I will add info from the index file here. I will filter from there to what will go here.\nMy goal is to first have the website have a map of the concepts in time series. I want to first avoid doing it by chapters since it seperates topics and limit my learning to that lesson. Bigger picture first.\n\n\n\n\n\n# code for lesson 1.5\n\nthe following does the multiplicative model\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsource(\"../common_functions.R\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set random seed for reproducibility\nset.seed(123) \n\n# Set parameters & initialize vectors\nnum_years <- 10\nn <- 12 * num_years\nsigma <- .75\na <- 0.03\nb <- 1\nc <- 0.5 \ntrend <- seasonal <- x_t <- rep(0,n)\ntime_seq <- seq(1,n)\n\n# Generate correlated error terms\nw <- rnorm(n + 4, 0.2, 0.1) # Changed to a mean of 1 and sd of 0.03\nz = w + lead(w,1) + lead(w,2) + lead(w,3) + lead(w,4)\nz  = head(z, n)\n\n# Get date\nyear_seq <- lubridate::year(today()) - num_years  + (time_seq - 1) %/% 12\nmonth_seq <- (time_seq - 1) %% 12 + 1\ndate_seq <- ymd(paste0(year_seq,\"-\",month_seq,\"-01\"))\n\n# Get data\nfor (t in 1:n) {\n  trend[t] <- exp(a * t)\n  seasonal[t] <- exp( b * sin(t / 12 * 2 * pi * 1)  + c * cos(t / 12 * 2 * pi * 3) + 1 )\n  x_t[t] <- trend[t] * seasonal[t] * z[t] # Note R's definition of the mult. model\n}\n\nx_df <- data.frame(x_t = x_t, trend = trend, seasonal = seasonal)\n\nstart_year <- lubridate::year(today()) - num_years\nstart_date <- lubridate::ymd(paste0(start_year,\"-01-01\"))\n\n# start_date <- lubridate::ymd(\"1958-01-01\")\ndate_seq <- seq(start_date,\n    start_date + months(nrow(x_df)-1),\n    by = \"1 months\")\n\nx_df_ts <- x_df |>\n  mutate(\n    date = date_seq,\n    month = tsibble::yearmonth(date)\n  ) |>\n  select(date, month, trend, seasonal, x_t) |>\n  as_tsibble(index = month)\n```\n:::\n\n::: {.cell}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table table-striped\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;\"> Date </th>\n   <th style=\"text-align:center;\"> Month </th>\n   <th style=\"text-align:center;\"> Trend, $$m_t$$ </th>\n   <th style=\"text-align:center;\"> Seasonal, $$s_t$$ </th>\n   <th style=\"text-align:center;\"> Data, $$x_t$$ </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-01-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 Jan </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.03 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 4.482 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 5.065 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-02-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 Feb </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.062 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 3.92 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 5.512 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-03-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 Mar </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.094 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 7.389 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 11.266 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-04-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 Apr </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.127 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 10.655 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 13.348 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-05-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 May </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.162 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 4.482 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 5.391 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014-06-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2014 Jun </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.197 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.649 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.93 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> ⋮ </td>\n   <td style=\"text-align:center;min-width: 0in; \"> ⋮ </td>\n   <td style=\"text-align:center;min-width: 0in; \"> ⋮ </td>\n   <td style=\"text-align:center;min-width: 0in; \"> ⋮ </td>\n   <td style=\"text-align:center;min-width: 0in; \"> ⋮ </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2023-11-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2023 Nov </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 35.517 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 1.649 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 39.853 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;min-width: 0in; \"> 2023-12-01 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 2023 Dec </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 36.598 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 4.482 </td>\n   <td style=\"text-align:center;min-width: 0in; \"> 121.366 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntrend_plot <- ggplot(x_df_ts, aes(x=month, y=trend)) + \n  geom_line() +\n  labs(\n    title=\"Plot of Trend\", \n    x=\"Month\", \n    y=\"Trend\"\n    ) +\n  theme(plot.title = element_text(hjust = 0.5))\n\nseasonal_plot <- ggplot(x_df_ts, aes(x=month, y=seasonal)) + \n  geom_line() +\n  labs(\n    title=\"Plot of Seasonal Effect\", \n    x=\"Month\", \n    y=\"Seasonal\"\n    ) +\n  theme(plot.title = element_text(hjust = 0.5))\n\nerror_plot <- ggplot(x_df_ts, aes(x = month, y = x_t / trend / seasonal)) + \n  geom_line() +\n  labs(\n    title=\"Plot of Random Error Term\", \n    x=\"Month\", \n    y=\"Random\"\n  ) +\n  theme(plot.title = element_text(hjust = 0.5))\n\nx_plot <- ggplot(x_df_ts, aes(x=month, y=x_t)) + \n  geom_line() +\n  labs(\n    title=\"Plot of Simulated Time Series\", \n    x=\"Month\", \n    y=\"x_t\"\n  ) +\n  theme(plot.title = element_text(hjust = 0.5))\n\nx_plot <- x_plot  + labs(title = \"True (Simulated) Values\", x = NULL)\ntrend_plot <- trend_plot + labs(title = NULL, x = NULL)\nseasonal_plot <- seasonal_plot + labs(title = NULL, x = NULL)\nerror_plot <- error_plot + labs(title = NULL)\n\nx_plot / trend_plot / seasonal_plot / error_plot \n```\n\n::: {.cell-output-display}\n![](chapter_1_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\nRandom Error Term (Error Plot):\n$$ e_t = \\frac{x_t}{m_t \\cdot s_t} $$\n\nTrend:\n$$ m_t = e^{a \\cdot t} $$\n\nSeasonal:\n$$ s_t = e^{b \\cdot \\sin\\left(\\frac{2 \\pi t}{12}\\right) + c \\cdot \\cos\\left(\\frac{6 \\pi t}{12}\\right) + 1} $$\n\nCombined Time Series (Multiplicative Model):\n$$ x_t = m_t \\cdot s_t \\cdot z_t $$\n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}